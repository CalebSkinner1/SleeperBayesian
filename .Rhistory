fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
injury_data_24
statistics_2023
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3)) %>%
drop_na()
injury_data_24
load_nba_player_box(season = 2024)
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3)) %>%
drop_na()
injury_data_24
load_nba_player_box(season = 2024) %>%
filter(season_type == 2)
# teams and games they play
nba_teams_25 <- load_nba_team_box(season = 2025) %>%
filter(season_type == 2) %>%
select(game_date, team_name) %>%
rename(date = game_date)
# each player with missed games
injury_data_25 <- load_nba_player_box(season = 2025) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2025, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_25, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2025, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(last_year_statistics, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3)) %>%
drop_na()
# model
lr_spec <- logistic_reg() %>%
set_engine("glm") %>%
set_mode("classification")
lr_fit_25 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_25)
lr_fit_25 %>%
pluck("fit") %>%
summary()
augment(lr_fit, new_data = injury_data) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_25, new_data = injury_data_25) %>%
conf_mat(truth = played, estimate = .pred_class)
# teams and games they play
nba_teams_24 <- load_nba_team_box(season = 2024) %>%
filter(season_type == 2) %>%
select(game_date, team_name) %>%
rename(date = game_date)
statistics_2023 <- load_nba_player_box(season = 2023) %>%
filter(season_type == 2) %>%
rename(name = athlete_display_name) %>%
select(name) %>%
group_by(name) %>%
summarize(
play_rate = n()/82
)
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_24, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3)) %>%
drop_na()
lr_fit24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
lr_fit %>%
pluck("fit") %>%
summary()
injury_data_24
augment(lr_fit, new_data = injury_data) %>%
conf_mat(truth = played, estimate = .pred_class)
lr_fit_24 %>%
pluck("fit") %>%
summary()
lr_fit24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_24, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
four_games = lead(played, 4),
five_games = lead(played, 5),
six_games = lead(played, 6)) %>%
drop_na()
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + four_games + five_games + six_games,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
augment(lr_fit, new_data = injury_data) %>% view()
augment(lr_fit_24, new_data = injury_data_24) %>% view()
# each player with missed games
injury_data_25 <- load_nba_player_box(season = 2025) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2025, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_25, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2025, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(last_year_statistics, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3)) %>%
drop_na()
injury_data_25
day(1)
?day
# each player with missed games
injury_data_25 <- load_nba_player_box(season = 2025) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2025, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_25, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2025, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(last_year_statistics, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
back_to_back = if_else(date == lead(date) + days(1), 1, 0)) %>%
drop_na()
injury_data_25
# model
lr_spec <- logistic_reg() %>%
set_engine("glm") %>%
set_mode("classification")
lr_fit_25 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_25)
lr_fit_25 %>%
pluck("fit") %>%
summary()
lr_fit_25 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_25)
lr_fit_25 %>%
pluck("fit") %>%
summary()
augment(lr_fit_25, new_data = injury_data_25) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_25, new_data = injury_data_25) %>%
accuracy(truth = played, estimate = .pred_class)
# teams and games they play
nba_teams_24 <- load_nba_team_box(season = 2024) %>%
filter(season_type == 2) %>%
select(game_date, team_name) %>%
rename(date = game_date)
# compute play rate from 2023
statistics_2023 <- load_nba_player_box(season = 2023) %>%
filter(season_type == 2) %>%
rename(name = athlete_display_name) %>%
select(name) %>%
group_by(name) %>%
summarize(
play_rate = n()/82)
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_24, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
back_to_back = if_else(date == lead(date) + days(1), 1, 0)) %>%
drop_na()
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>% view()
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>% view()
# each player with missed games
injury_data_25 <- load_nba_player_box(season = 2025) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2025, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_25, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2025, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(last_year_statistics, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
back_to_back = if_else(date == lead(date) + days(1) & lead(played) == 1, 1, 0)) %>%
drop_na()
# model
lr_spec <- logistic_reg() %>%
set_engine("glm") %>%
set_mode("classification")
lr_fit_25 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_25)
lr_fit_25 %>%
pluck("fit") %>%
summary()
augment(lr_fit_25, new_data = injury_data_25) %>%
conf_mat(truth = played, estimate = .pred_class)
augment(lr_fit_25, new_data = injury_data_25) %>%
accuracy(truth = played, estimate = .pred_class)
# teams and games they play
nba_teams_24 <- load_nba_team_box(season = 2024) %>%
filter(season_type == 2) %>%
select(game_date, team_name) %>%
rename(date = game_date)
# compute play rate from 2023
statistics_2023 <- load_nba_player_box(season = 2023) %>%
filter(season_type == 2) %>%
rename(name = athlete_display_name) %>%
select(name) %>%
group_by(name) %>%
summarize(
play_rate = n()/82)
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_24, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
back_to_back = if_else(date == lead(date) + days(1), 1, 0)) %>%
drop_na()
# each player with missed games
injury_data_24 <- load_nba_player_box(season = 2024) %>%
filter(season_type == 2) %>%
select(athlete_display_name, team_name, game_date) %>%
left_join(df_2024, ., by = join_by(name == athlete_display_name, date == game_date)) %>%
select(name, team_name) %>%
distinct() %>%
full_join(nba_teams_24, by = join_by(team_name), relationship = "many-to-many") %>%
select(name, date) %>%
left_join(df_2024, join_by(name, date)) %>%
rowwise() %>%
mutate(played = case_when(
is.na(sleeper_points) ~ 0,
sleeper_points > 0 ~ 1,
.default = 0)) %>%
ungroup() %>%
group_by(name) %>%
left_join(statistics_2023, by = join_by(name)) %>%
select(name, date, played, play_rate) %>%
mutate(
played = factor(played),
last_game = lead(played),
two_games = lead(played, 2),
three_games = lead(played, 3),
back_to_back = if_else(date == lead(date) + days(1) & lead(played) == 1, 1, 0)) %>%
drop_na()
lr_fit_24 <- lr_spec %>%
fit(
played ~ play_rate + last_game + two_games + three_games + back_to_back,
data = injury_data_24)
lr_fit_24 %>%
pluck("fit") %>%
summary()
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>% view()
lr_fit_24 %>%
pluck("fit") %>%
summary()
# accuracy with three games is approx equal to accuracy with six games
augment(lr_fit_24, new_data = injury_data_24) %>%
accuracy(truth = played, estimate = .pred_class)
augment(lr_fit_24, new_data = injury_data_24) %>%
conf_mat(truth = played, estimate = .pred_class)
